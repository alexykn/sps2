[package]
name = "complex-app"
version = "2.1.3"
revision = 2
description = "A complex application with multiple dependencies"
license = "Apache-2.0"
homepage = "https://github.com/example/complex-app"
maintainer = "Complex Team <team@example.com>"

[dependencies]
libssl = ">=1.1.1,<2.0"
zlib = "~=1.2.11"
sqlite = ">=3.36.0"
curl = ">=7.68.0,<8.0"

[build]
build_dependencies = [
    "cmake>=3.16",
    "gcc>=9.0",
    "pkg-config>=0.29"
]

[package.metadata]
architecture = "aarch64-apple-darwin"
checksum = "a665a45920422f9d417e4867efdc4fb8a04a1f3cbc663dda3c5c0c0c1b7e84c5"
size = 52428800

[package.files]
bin = ["bin/complex-app", "bin/complex-cli"]
lib = ["lib/libcomplex.dylib"]
include = ["include/complex.h"]
docs = ["README.md", "CHANGELOG.md", "docs/"]
share = ["share/complex/"]

[package.scripts]
pre_install = """
# Check system requirements
if ! command -v sqlite3 &> /dev/null; then
    echo "Warning: sqlite3 not found in system"
fi
"""

post_install = """
echo "Setting up complex-app configuration..."
mkdir -p ~/.config/complex-app
echo "complex-app installed successfully"
"""

pre_uninstall = """
echo "Backing up user configuration..."
if [ -d ~/.config/complex-app ]; then
    cp -r ~/.config/complex-app ~/.config/complex-app.backup
fi
"""

post_uninstall = """
echo "complex-app removed. Configuration backup available at ~/.config/complex-app.backup"
"""